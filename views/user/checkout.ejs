<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShopX|checkout</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body{
        background-color: #220901;
      }
      .container {
        height: 100vh;
        width: 100%;
      }
      .products {
        max-height: 200px;
        width: 30%;
        background-color: white;
        position: relative;
        top: 350px;
        left: 18%;
        overflow: auto;
        border-radius: 5px;
      }
      .products .card {
        height: 100px;
        width: 100%;
        background-color: white;
        border-bottom: 1px solid gray;
        display: flex;
        justify-content: space-between;
      }
      .products .card img{
        height: 100%;
        width: 20%;

      }
      .products .card span{
        height: 100%;
        width: 30%;
        /* background-color: red; */
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .coupon {
        height: 150px;
        width: 30%;
        position: absolute;
        top: 100px;
        left: 50%;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        background-color: white;
        padding: 10px;
      }
      .coupon div{
        height: 70px;
        width: 100%;
        /* background-color: red; */
        display: flex;
        gap: 50px;
      }
      .coupon p{
        margin-left: 20px;
      }
      .coupon div div{
        height: 40px;
        width: 30%;
        background-color: #e9ecef;
        margin-top: 15px;
        margin-left: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 5px;
      }
      .coupon button{
        height: 40px;
        width: 20%;
        background-color: #ffb703;
        margin-top: 15px;
        border: none;
        border-radius: 5px;
      }
      .coupon button:hover{
        background-color: #ff9914;
      }
      .price {
        height: 200px;
        width: 30%;
        background-color: white;
        position: absolute;
        top: 280px;
        left: 50%;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        gap: 5%;
        padding: 10px;
      }
      .price .parent{
        height: 20%;
        width: 100%;
        /* background-color: green; */
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid gray;
      }
      .price .parent div{
        height: 90%;
        width: 30%;
        /* background-color: yellow; */
        display: flex;
        align-items: center;
        /* justify-content: center; */
        font-size: 15px;
        font-family: sans-serif;
      }
     
      .address{
        height: 300px;
        width: 30%;
        background-color: white;
        position: absolute;
        top: 100px;
        left: 18%;
        border-radius: 5px;
      }
      .address p{
        position: relative;
        top: 5%;
        left: 5%;
      }
      .address input{
        height: 35px;
        width: 70%;
        margin-left: 15%;
        border-radius: 5px;
        border: none;
        background-color: #e0e1dd;
        text-align: center;
        color: black;
      }
      ::placeholder{
        text-align: center;
        color: black;
      }
      .address div{
        display: flex;
        gap: 5px;
        flex-direction: column;
        position: relative;
        top: 10%;
      }
      
      
      .peyment{
        position: absolute;
        height: 130px;
        width: 30%;
        top: 510px;
        left: 50%;
        gap: 40%;
        font-family: sans-serif;
        background-color: white;
        border-radius: 5px;
        padding: 10px;
        /* display: flex; */
      }
      .peyment p{
        width: 100%;
        height: 30%;
        text-align: center;
        font-size: 20px;
        /* color: white; */
        /* background-color: green; */
      }
      .peyment .main{
        height: 40%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        /* background-color: yellow; */
      }
      .peyment div{
        height: 100%;
        width: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        /* color: white; */
        /* background-color: red; */
      }
      .peyment button{
        height: 30px;
        width: 30%;
        margin-left: 35%;
        margin-top: 5px;
        border-radius: 5px;
        border: none;
        background-color: #ffb703;
      }

      @media (max-width:860px){
        .products {
        display: none;
      }
      
      .coupon {
        height: 150px;
        width: 90%;
        position: relative;
        top: 420px;
        left: 5%;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        background-color: white;
        padding: 10px;
      }  
      .price {
        height: 200px;
        width: 90%;
        background-color: white;
        position: absolute;
        top: 600px;
        left: 5%;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        gap: 5%;
        padding: 10px;
      }  
      .address{
        height: 300px;
        width: 90%;
        background-color: white;
        position: absolute;
        top: 100px;
        left: 10%;
        border-radius: 5px;
      }
      .address p{
        position: relative;
        top: 5%;
        left: 5%;
      }
      .address input{
        height: 35px;
        width: 70%;
        margin-left: 15%;
        border-radius: 5px;
        border: none;
        background-color: #e0e1dd;
        text-align: center;
        color: black;
      } 
      .peyment{
        position: relative;
        height: 130px;
        width: 90%;
        top: 670px;
        left: 5%;
        
      }
      .peyment p{
        width: 100%;
        height: 28%;
        text-align: center;
        font-size: 20px;
        /* color: white; */
        /* background-color: green; */
      }
      }
      
    </style>
    <%- include('layout/header') -%>
  </head>
  <body>
    <%- include('layout/navbar') -%>
    <div class="container">
      <div class="products">
        <% cartData.productId.forEach((data)=>{ %>
          <div class="card">
            <img src="/<%= data.id.image[0] %>" alt="">
            <span>₹ <%= data.id.offerprize %></span>
            <span><%= data.count %></span>
          </div>
        <% }) %>
      </div>
      <% if(coupon){ %>
        <div class="coupon">
          <p>Coupons </p>
          <p>you have a coupon for your purchase. <span style="color: #ff6d00;">Apply for more discount </span> </p>
          <div><div><%= coupon.code %></div><button id="Btn" type="button" onclick="coupon('<%= coupon._id %>')">Apply</button></div>
        </div>
      <% }else{ %>
        <div class="coupon">
          <p>Coupons </p>
          <p>you have no coupon for your purchase. <br><br><br><span style="color: #ff6d00;">Coupon eligible for purchase more than 1000 and above </span> </p>
        </div>
      <% } %>
      <form action="/user/checkout" method="post">
      <div class="address">
        <p>Shipping Address</p>
        <div>
          <input type="text" id="house" placeholder="House Name" name="house" value="<%=address.housename %>" required>
          <input type="text" id="post" placeholder="Post" name="post" value="<%=address.post %>" required> 
          <input type="number" id="pin" placeholder="Pin number" name="pincode" value="<%=address.pincode %>" required >
          <input type="text" id="district" placeholder="District" name="district" value="<%=address.district %>" required>
          <input type="text" id="state" placeholder="State" name="state" value="<%=address.state %>" required>
          <input type="number"  id="mobno" placeholder="+91 XXXXXXXXXX" name="mobno" value="" required>
          <input type="hidden" id="couponid" value="" name="couponid" >
        </div>
      </div>
      <!-- form  -->
      <div class="price">
        <div class="parent">
        <div>Sub total ₹</div>
        <div id="subtotal"><%= subtotal %></div>
      </div>
        <div class="parent">
        <div>Shipping Charge ₹</div>
        <div id="shipping">00</div>
      </div>
        <div class="parent">
        <div>Discount price ₹</div>
        <div id="discount">00</div>
      </div>
        <div class="parent">
          <div style="font-weight:800; color: #ff6d00;">Total ₹</div>
        <div id="total"  style="font-weight:800; color: #ff6d00;"><%= total %></div>
      </div>
      </div>
     <div class="peyment">
      <p>Select your peyment methord</p>
      <div class="main">
        <div>
          <input type="radio" name="peyment" value="cod" required>
          <label for="">Cash on delivery</label>
        </div>
        <div>
          <input type="radio" name="peyment" value="upi" required>
          <label for="">UPI</label>
        </div>
      </div>
      <button id="submit" type="submit">Place order</button>
     </div>
    </div>
  </form>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="/js/checkout.js"></script>
  </body>
</html>
